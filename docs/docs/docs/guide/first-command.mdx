---
title: 'First Command'
sidebar_position: 2
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

# Hello World

Creating a CLI is as simple as creating a function closure
that returns either a function, an async function, or a
[NodeJS Transform stream](https://nodejs.org/dist/latest-v14.x/docs/api/stream.html#stream_duplex_and_transform_streams).
Async CLIs and Streaming CLIs will be demonstrated later in this guide.
This article demonstrates creating a simple CLI command with
a function closure returning a function.

The function closure must be exported and define a `.command` property
that specifies the name of the CLI command. The `.command`
property informs `commandville` that the corresponding closure is
a CLI command. We call this closure the **command closure**.

```javascript title="~/my-project/index.js"
const greetCommand = function greet() {
  // parse recieves process.argv.slice(2)
  // but without flagged options.
  return function parse([greet, name]) {
    // commandville automatically streams
    // returned values to process.stdout
    return `${greet}, ${name}!`
  }
}

// Define greetCommand as a command closure
// by giving it a command name.
greetCommand.command = 'greet'

module.exports = greetCommand
```

Run `$ cmv --help` to view the available command or `$ cmv greet --help`
to view help specific to the `greet` command.

<Tabs
  groupId="pkg-manager"
  defaultValue="pnpm"
  values={[
    {label: 'npm', value: 'npm'},
    {label: 'pnpm', value: 'pnpm'},
    {label: 'yarn', value: 'yarn'},
  ]}>
  <TabItem value="npm">

```bash title="~/my-project"
$ npm run cmv -- --help
# outputs
cmv [command]

Commands:
  cmv greet
```

  </TabItem>
  <TabItem value="pnpm">

```bash title="~/my-project"
$ pnpm cmv --help
# outputs
cmv [command]

Commands:
  cmv greet
```

  </TabItem>
  <TabItem value="yarn">

```bash title="~/my-project"
$ yarn cmv --help
# outputs
cmv [command]

Commands:
  cmv greet
```

  </TabItem>
</Tabs>

We can run the `greet` command with `cmv greet <GREETING> <NAME>`.

<Tabs
  groupId="pkg-manager"
  defaultValue="pnpm"
  values={[
    {label: 'npm', value: 'npm'},
    {label: 'pnpm', value: 'pnpm'},
    {label: 'yarn', value: 'yarn'},
  ]}>
  <TabItem value="npm">

```bash title="~/my-project"
$ npm run cmv -- greet Hello Derek
# Hello, Derek!
```

  </TabItem>
  <TabItem value="pnpm">

```bash title="~/my-project"
$ pnpm cmv greet Hello Derek
# Hello, Derek!
```

  </TabItem>
  <TabItem value="yarn">

```bash title="~/my-project"
$ yarn cmv greet Hello Derek
# Hello, Derek!
```

  </TabItem>
</Tabs>

The function returned by the **command closure** receives
`process.argv.slice(2)` but without any flagged options.

For example, running `cmv arg-example one two three --my-option four` with the following
**command closure**

<!-- prettier-ignore-start -->
```javascript
const cmd = () => (...args) => `${args.join(', ')}`

cmd.command = 'arg-example'
module.exports = cmd
```
<!-- prettier-ignore-end -->

will output

```bash
# skips outputting any flagged options such as --my-option
one, two, three
```

We will see how to handle flagged options next.
